function goBack(){window.history.back()}function navSelected(e){var a=["index","customers","calendar","booking","settings"],t=["arrivals","departures","appointments","allBookings","outstanding"],o=0;for(o;o<=a.length-1;o++){var r=e.indexOf(a[o]);if(-1!=r){var i=a[o];$("#mainNav > ."+i).addClass("selectedNav"),$("#mobileNav > ul > ."+i).addClass("active"),o=a.length}else for(j=0;j<=t.length-1;j++)r=e.indexOf(t[j]),-1!=r&&($("#mainNav > .reports").addClass("selectedNav"),$("#mobileNav > ul > .reports").addClass("active"))}}function getMonth(e){var a=["January","February","March","April","May","June","July","August","September","October","November","December"];return a[e-1]}function clickDate(e,a,t){var o=$("#"+t+"Container").position(),r=$("#"+t+"Container").width(),i=$("#"+t+"Container").height();$("#"+t+"Loading").css({left:o.left,top:o.top,height:i+"px",width:r+"px"}),$("#"+t+"Loading > i").css("margin-top",i/2+"px"),$("#"+t+"Loading").show(),e=e.split(" ");var s=e[1],n=e[0],l=e[2];$.post("clickDates.php",{day1:s,month1:n,year1:l,direction1:a},function(e){e=e.split("-"),s=e[1],n=e[0],l=e[2],$("#"+t+"Date").val(s+" "+n+" "+l),n=getMonth(n),$("#"+t+"Time").html(s+" "+n+" "+l),loadContainerBookings($("#"+t+"Date").val(),t)})}function loadContainerBookings(e,a){e=e.split(" ");var t=e[0],o=e[1],r=e[2],i=$("#limitNumber").val();$.post("load"+a+"s.php",{day1:t,month1:o,year1:r,limit:i},function(e){if("none"==e)$("#"+a+"sLoaded").html("You have no "+a+'s for today. <a href="booking">Click here to make a booking.</a>');else{e=e.replace("[",""),e=e.replace("]",""),e=e.split(","),"appointment"==a?$("#"+a+"sLoaded").html("<table id='"+a+"Table' class='departmentTable' width='100%'><tr id='"+a+"Header' class='departmentHeader'><thead><td width='60%'>Customer</td><td>Type</td><td>Status</td></tr><thead>"):$("#"+a+"sLoaded").html("<table id='"+a+"Table' class='departmentTable' width='100%'><tr id='"+a+"Header' class='departmentHeader'><thead><td width='60%'>Customer</td><td>Kennel</td><td>Status</td></tr></thead>");for(var t=1;t<e.length;t++){var o;e[t]=e[t].replace('"',""),e[t]=e[t].replace('"',"");var r=e[t].split("&"),i=r[2].split("*");o='<tr><td width="60%" onclick="location.href=\'https://friendsfur-ever.ca/schedule/booking?bookingid='+r[3]+"';\">"+r[0];for(var s=0;s<=i.length-2;s++){var n=i[s].split("^");o=o+"<button onclick='location.href=\"kennelsheet.php?dogid="+n[1]+";\"' class='profileButton3'>"+n[0]+"</button>"}$("#"+a+"Table").append(o+"</td><td>"+r[1]+"</td><td>??</td></tr></table>")}}$("#"+a+"Loading").hide()})}function profileSelect(e){$(".profileMenu").removeClass("profileMenuSelected"),$("#"+previousProfileSelection+"Section").hide(),$("#"+e).addClass("profileMenuSelected"),$("#"+e+"Section").show(),previousProfileSelection=e}function newClient(){$("#customerMessage").html(""),$("span").remove("#redError"),$("input").removeClass("error"),$("select").removeClass("error"),$("textarea").removeClass("error");var e=$("#customerFirst").val(),a=$("#customerLast").val(),t=$("#customerEmail").val(),o=$("#customerPhone").val(),r=$("#customerMobile").val(),i=$("#customerWork").val(),s=$("#customerStreet").val(),n=$("#customerStreet2").val(),l=$("#customerCity").val(),d=$("#customerProvince").val(),c=$("#customerPostal").val(),p=$("#customerEname").val(),h=$("#customerEphone").val(),g=$("#customerNotes").val();$.post("customerSave.php",{first1:e,last1:a,email1:t,phone1:o,mobile1:r,work1:i,street1:s,street21:n,city1:l,province1:d,postal1:c,ename1:p,ephone1:h,notes1:g},function(e){"Saved"===e?($("#customerMessage").html("We saved your new client but could not redirect your page. Please go to the customers page and select the client."),$("span").remove("#redError"),$("input").removeClass("error"),$("select").removeClass("error"),$("textarea").removeClass("error")):"Fail"===e?$("#customerMessage").html("Something went wrong. Please try again."):"customerFirst"===e?($("#"+e).addClass("error"),$("body").animate({scrollTop:$("#"+e).offset()},"slow"),$("#"+e).before("<span id='redError'>This field is required.</span>"),$("body").animate({scrollTop:$("#redError").offset().top},"slow")):"customerLast"===e?($("#"+e).addClass("error"),$("#"+e).before("<span id='redError'>This field is required.</span>"),$("body").animate({scrollTop:$("#redError").offset().top},"slow")):"customerPhone"===e?($("#"+e).addClass("error"),$("#"+e).before("<span id='redError'>Please remove any spaces or dashes.</span>"),$("body").animate({scrollTop:$("#redError").offset().top},"slow")):"customerEphone"===e?($("#"+e).addClass("error"),$("#"+e).before("<span id='redError'>Please remove any spaces or dashes.</span>"),$("body").animate({scrollTop:$("#redError").offset().top},"slow")):"customerMobile"===e?($("#"+e).addClass("error"),$("#"+e).before("<span id='redError'>Please remove any spaces or dashes.</span>"),$("body").animate({scrollTop:$("#redError").offset().top},"slow")):"customerWork"===e?($("#"+e).addClass("error"),$("#"+e).before("<span id='redError'>Please remove any spaces or dashes.</span>"),$("body").animate({scrollTop:$("#redError").offset().top},"slow")):"customerEmail"===e?($("#"+e).addClass("error"),$("#"+e).before("<span id='redError'>Not a valid email.</span>"),$("body").animate({scrollTop:$("#redError").offset().top},"slow")):location.href="customer.php?id="+e})}function loadCustomer(e){$.post("loadCustomer.php",{id1:e},function(e){e?$("#customerForm").html(e):$("#customerForm").html("Something went wrong.")})}function updateCustomer(e){$("#customerMessage").html(""),$("span").remove("#redError"),$("input").removeClass("error"),$("select").removeClass("error"),$("textarea").removeClass("error");var a=$("#customerFirst").val(),t=$("#customerLast").val(),o=$("#customerEmail").val(),r=$("#customerPhone").val(),i=$("#customerMobile").val(),s=$("#customerWork").val(),n=$("#customerStreet").val(),l=$("#customerStreet2").val(),d=$("#customerCity").val(),c=$("#customerProvince").val(),p=$("#customerPostal").val(),h=$("#customerEname").val(),g=$("#customerEphone").val(),v=$("#customerNotes").val();$.post("customerUpdate.php",{id1:e,first1:a,last1:t,email1:o,phone1:r,mobile1:i,work1:s,street1:n,street21:l,city1:d,province1:c,postal1:p,ename1:h,ephone1:g,notes1:v},function(a){"Success"===a?($("#customerMessage").html(""),$("span").remove("#redError"),$("input").removeClass("error"),$("select").removeClass("error"),$("textarea").removeClass("error"),alert("Success"),loadCustomer(e)):"Fail"===a?$("#customerMessage").html("Something went wrong. Please try again."):"customerFirst"===a?($("#"+a).addClass("error"),$("body").animate({scrollTop:$("#"+a).offset()},"slow"),$("#"+a).before("<span id='redError'>This field is required.</span>"),$("body").animate({scrollTop:$("#redError").offset().top},"slow")):"customerLast"===a?($("#"+a).addClass("error"),$("#"+a).before("<span id='redError'>This field is required.</span>"),$("body").animate({scrollTop:$("#redError").offset().top},"slow")):"customerPhone"===a?($("#"+a).addClass("error"),$("#"+a).before("<span id='redError'>Please remove any spaces or dashes.</span>"),$("body").animate({scrollTop:$("#redError").offset().top},"slow")):"customerEphone"===a?($("#"+a).addClass("error"),$("#"+a).before("<span id='redError'>Please remove any spaces or dashes.</span>"),$("body").animate({scrollTop:$("#redError").offset().top},"slow")):"customerMobile"===a?($("#"+a).addClass("error"),$("#"+a).before("<span id='redError'>Please remove any spaces or dashes.</span>"),$("body").animate({scrollTop:$("#redError").offset().top},"slow")):"customerWork"===a?($("#"+a).addClass("error"),$("#"+a).before("<span id='redError'>Please remove any spaces or dashes.</span>"),$("body").animate({scrollTop:$("#redError").offset().top},"slow")):"customerEmail"===a&&($("#"+a).addClass("error"),$("#"+a).before("<span id='redError'>Not a valid email.</span>"),$("body").animate({scrollTop:$("#redError").offset().top},"slow"))})}function deleteClient(e){$.post("deleteCustomer.php",{id:e},function(e){"Success"===e?location.href="customers.php":alert("Something went wrong.")})}function addDogForm(){$("#addDog").toggle()}function showEditDog(){$(".editDog").hide()}function loadDogs(e){"This client has no dogs."===$("#loadDog").html()&&addDogForm(),$.post("loadDogs.php",{id1:e},function(e){e?$("#loadDog").html(e):$("#loadDog").html("Something went wrong.")})}function saveDog(e,a){$("#saveDogButton").html('<i class="fa fa-spinner fa-pulse fa-fw"></i>'),$("#addDogMessage").html(""),$("span").remove("#redError"),$("input").removeClass("error"),$("select").removeClass("error"),$("textarea").removeClass("error");var t=$("#addName").val(),o=$("#addBreed").val(),r=$("#addColor").val(),i=$("#addAge").val(),s=$("#addGender").val(),n=$("#addFixed").val(),l=$("#addWeight").val(),d=$("#addVdate").val(),c=$("#addVphone").val(),p=$("#addVname").val(),h=$("#addBrand").val(),g=$("#addOften").val(),v=$("#addAmount").val(),u=$("#addMessage").val();$.post("dogSave.php",{id1:e,name1:t,breed1:o,color1:r,gender1:s,age1:i,fixed1:n,weight1:l,brand1:h,amount1:v,often1:g,vdate1:d,vname1:p,vphone1:c,message1:u},function(a){"Success"===a?($("#addName").val(""),$("#addBreed").val(""),$("#addColor").val(""),$("#addAge").val(""),$("#addGender").val(""),$("#addFixed").val(""),$("#addWeight").val(""),$("#addVdate").val(""),$("#addVphone").val(""),$("#addVname").val(""),$("#addBrand").val(""),$("#addOften").val(""),$("#addAmount").val(""),$("#addMessage").val(""),$("#addDogMessage").html(""),$("span").remove("#redError"),$("input").removeClass("error"),$("select").removeClass("error"),$("textarea").removeClass("error"),$("#addDog").hide()):"Fail"===a?$("#addDogMessage").html("Something went wrong. Please try again."):"addVdate"===a?($("#"+a).addClass("error"),$("body").animate({scrollTop:$("#"+a).offset()},"slow"),$("#"+a).before("<span id='redError'>Already Expired.</span>"),$("body").animate({scrollTop:$("#redError").offset().top},"slow")):"addVphone"===a?($("#"+a).addClass("error"),$("#"+a).before("<span id='redError'>Please enter a phone number.</span>"),$("body").animate({scrollTop:$("#redError").offset().top},"slow")):"addFixed"===a?($("#"+a).addClass("error"),$("#"+a).before("<span id='redError'>This is a requirement after 8 months.</span>"),$("body").animate({scrollTop:$("#redError").offset().top},"slow")):"addName"===a&&($("#"+a).addClass("error"),$("#"+a).before("<span id='redError'>This field is required.</span>"),$("body").animate({scrollTop:$("#redError").offset().top},"slow")),$("#saveDogButton").html("Save Dog");var t=window.location.href;-1!==t.indexOf("booking")?(liveSearchLoadDogs(e),subTotal=calculatePrice(bookingDates.length,numberOfDogs),tax=addTax(subTotal),addTotal(subTotal,tax)):loadDogs(e)})}function updateDog(e,a){$("#addDogMessage"+a).html(""),$("span").remove("#redError"),$("input").removeClass("error"),$("select").removeClass("error"),$("textarea").removeClass("error");var t=$("#dogId"+a).val(),o=$("#addName"+a).val(),r=$("#addBreed"+a).val(),i=$("#addColor"+a).val(),s=$("#addAge"+a).val(),n=$("#addGender"+a).val(),l=$("#addFixed"+a).val(),d=$("#addWeight"+a).val(),c=$("#addVdate"+a).val(),p=$("#addVphone"+a).val(),h=$("#addVname"+a).val(),g=$("#addBrand"+a).val(),v=$("#addOften"+a).val(),u=$("#addAmount"+a).val(),f=$("#addMessage"+a).val();$.post("dogUpdate.php",{dogid1:t,name1:o,breed1:r,color1:i,gender1:n,age1:s,fixed1:l,weight1:d,brand1:g,amount1:u,often1:v,vdate1:c,vname1:h,vphone1:p,message1:f},function(e){"Success"===e?($("span").remove("#redError"),$("input").removeClass("error"),$("select").removeClass("error"),$("textarea").removeClass("error"),alert("Success"),$(".editDog").hide()):"Fail"===e?$("#addDogMessage"+a).html("Something went wrong. Please try again."):"addVdate"===e?($("#"+e).addClass("error"),$("body").animate({scrollTop:$("#"+e+a).offset()},"slow"),$("#"+e+a).before("<span id='redError'>Already Expired.</span>"),$("body").animate({scrollTop:$("#redError").offset().top},"slow")):"addVphone"===e?($("#"+e+a).addClass("error"),$("#"+e+a).before("<span id='redError'>Please enter a phone number.</span>"),$("body").animate({scrollTop:$("#redError").offset().top},"slow")):"addFixed"===e?($("#"+e+a).addClass("error"),$("#"+e+a).before("<span id='redError'>This is a requirement after 8 months.</span>"),$("body").animate({scrollTop:$("#redError").offset().top},"slow")):"addName"===e&&($("#"+e+a).addClass("error"),$("#"+e+a).before("<span id='redError'>This field is required.</span>"),$("body").animate({scrollTop:$("#redError").offset().top},"slow"))})}function deleteDog(e,a){$.post("deleteDog.php",{dogid1:e},function(e){"Success"===e?(alert("success"),loadDogs(a)):alert("Something went wrong.")})}function editDog(e){$(".editDog").hide(),$(".edit"+e).show()}function loadEditDog(e){$(".profileMenu").removeClass("profileMenuSelected"),$("#profilePet").addClass("profileMenuSelected"),previousProfileSelection="profilePet",$(".profileSection").hide(),$("#profilePetSection").show(),$(".edit"+e).show(),$("body").animate({scrollTop:$(".edit"+e).offset().top},"slow")}function editKennels(e){$("#editKennelMessage").html(""),0===e?$("#editKennelMessage").html("You must have at least one kennel to edit."):$("#kennelEditBox").toggle()}function reset(){}function switchAccordian(e){e=e.replace("AccordianButton",""),$("#"+e+"Panel").hasClass("show")?($("#"+e+"Panel").removeClass("show"),$("#"+e+"AccordianButton > i").removeClass("fa-rotate-180")):($("#"+e+"Panel").addClass("show"),$("#"+e+"AccordianButton > i").addClass("fa-rotate-180"))}function formatDate(e){return e=e.split("/"),newDateFormat=e[2]+"-"+e[0]+"-"+e[1],newDateFormat}function formatDateReverse(e){return e=e.split("-"),newDateFormat=e[1]+"/"+e[2]+"/"+e[0],newDateFormat}function whichContainer(e){var a=["bookingDate","bookingCustomer","bookingPet","bookingCost"],t=$("#whichContainer").val(),o=a.indexOf(t),r=a.indexOf(e);r>o&&($("#whichContainer").val(e),t=e),$("#bookingSummary button").removeClass("selected"),$("#"+t+"SummaryButton").addClass("selected"),$("#"+t+"Panel").addClass("show"),$("#"+t+"AccordianButton").addClass("fa-rotate-180"),$("html, body").animate({scrollTop:$("#"+t).offset().top-40},1e3)}function calculateEaster(e){var a,t,o,r,i,s,n,l,d,c,p,h,$,g,v,u,f=e;return v=f/19,a=Math.floor(19*(v-Math.floor(v))+.001),v=f/100,t=Math.floor(v),o=Math.floor(100*(v-Math.floor(v))+.001),v=t/4,r=Math.floor(v),i=Math.floor(4*(v-Math.floor(v))+.001),s=Math.floor((t+8)/25+.001),n=Math.floor((t-s+1)/3),v=(19*a+t-r-n+15)/30,l=Math.floor(30*(v-Math.floor(v))+.001),v=o/4,d=Math.floor(v),c=Math.floor(4*(v-d)+.001),v=(32+2*i+2*d-l-c)/7,p=Math.floor(7*(v-Math.floor(v))+.001),h=Math.floor((a+11*l+22*p)/451),v=(l+p-7*h+114)/31,$=Math.floor(v),g=Math.floor(31*(v-$)+.001),u="-04-",3==$&&(u="-03-"),easter=e+u+(++g+1),easter}function holidaysCalculate(){var e=new Date,a=e.getFullYear();holidays.push(a+"-01-01");for(var t,o=1;7>=o;o++){var r=new Date(a,1,o),i=r.getDay();1==i&&(t=a+"-02-"+(o+14),o=7)}holidays.push(t);var s=calculateEaster(a),n=new Date(s);n.setDate(n.getDate()-2);var l=n.getDate(),d=n.getMonth()+1,c=a+"-0"+d+"-"+l;holidays.push(c),holidays.push(s);for(var p,o=25;o>=18;o--){var n=new Date(a,4,o),i=n.getDay();1==i&&(p=a+"-05-"+o,o=18)}holidays.push(p),holidays.push(a+"-07-01");for(var h,o=1;7>=o;o++){var r=new Date(a,8,o),i=r.getDay();1==i&&(h=a+"-09-0"+o,o=7)}holidays.push(h);for(var $,o=1;7>=o;o++){var r=new Date(a,9,o),i=r.getDay();1==i&&($=a+"-10-"+(o+7),o=7)}holidays.push($),holidays.push(a+"-12-25"),holidays.push(a+"-12-26")}function addDayCareDate(){$("#dayCareDateError").html(""),$("div").removeClass("redHighlight");var e=$("#dayCareDateSelect").val();if(date2=e.split("/"),$("#"+parseInt(date2[0],10)+date2[1]+date2[2]).length)$("#dayCareDateError").html("This date has already been added."),$("#"+parseInt(date2[0],10)+date2[1]+date2[2]).addClass("redHighlight");else if(storeDayCareDates(e),"Off"==$("#editSwitch").val())$("#dayCareSelected").append("<div id="+parseInt(date2[0],10)+date2[1]+date2[2]+" class='dayCareDateBox'><span class='dayCareDate'>"+e+"</span><div class='dayCareDateBoxTools'><a onclick='editDayCareDate("+parseInt(date2[0],10)+date2[1]+date2[2]+");'>edit</a> | <a onclick='deleteDayCareDate("+parseInt(date2[0],10)+date2[1]+date2[2]+");'>delete</a></div></div>");else{var a=$("#editId").val(),t=$("#"+a+"> .dayCareDate").html();t=t.split("/"),newDateFormat=t[2]+"-"+t[0]+"-"+t[1];var o=holidayCheck(newDateFormat),r=weekendCheck(t[1],t[0],t[2]);if(0==r||6==r){var i=datesWeekend.indexOf(newDateFormat);datesWeekend.splice(i,1)}if(-1!=o){var i=holidayDates.indexOf(newDateFormat);holidayDates.splice(i,1)}var i=bookingDates.indexOf(newDateFormat);bookingDates.splice(i,1),$("#"+a).removeClass("editOn"),$("#"+a).html("<span class='dayCareDate'>"+e+"</span><div class='dayCareDateBoxTools'><a onclick='editDayCareDate("+parseInt(date2[0],10)+date2[1]+date2[2]+");'>edit</a> | <a onclick='deleteDayCareDate("+parseInt(date2[0],10)+date2[1]+date2[2]+");'>delete</a></div>"),$("#"+a).attr("id",parseInt(date2[0],10)+date2[1]+date2[2]),$("#editSwitch").val("Off")}}function deleteDayCareDate(e){var a=$("#"+e+"> .dayCareDate").html();a=a.split("/"),newDateFormat=a[2]+"-"+a[0]+"-"+a[1];var t=holidayCheck(newDateFormat),o=weekendCheck(a[1],a[0],a[2]);if(0==o||6==o){var r=datesWeekend.indexOf(newDateFormat);datesWeekend.splice(r,1)}if(-1!=t){var r=holidayDates.indexOf(newDateFormat);holidayDates.splice(r,1)}var r=bookingDates.indexOf(newDateFormat);bookingDates.splice(r,1),$("#"+e).remove()}function editDayCareDate(e){$("#"+e).addClass("editOn"),$("#editSwitch").val("On"),$("#editId").val(e)}function storeORremoveKennel(e){if($("#"+e+"progress").hasClass("ui-progressbar-indeterminate")||$("#"+e+"progress").hasClass("myBooking"))kennelsSelected.push(e);else{var a=kennelsSelected.indexOf(e);kennelsSelected.splice(a,1)}}function buttonBook(e){e=e.replace("button",""),$("#"+e+"progress").click()}function checkForBooking(e,a){$("#bookKennelsBox > .overlay").show();var t=$("#bookingKennels").height(),o=t/2;$("#bookKennelsBox > .overlay > .fa-spinner").css({"margin-top":o+"px"}),$("#bookKennelsBox > .overlay").height(t),e=formatDate(e),a=formatDate(a);var r=$("#totalKennel").val();$.post("checkForBooking.php",{checkIn1:e,checkOut1:a,totalKennels1:r},function(e){if(e){e=e.split("@");for(var a=e[0].split("&"),t=e[1].split("&"),o=e[2].split("&"),r=0;r<a.length;r++)$("#"+a[r]+"progress").find(".ui-progressbar-value").removeClass("available"),$("#"+a[r]+"progress").progressbar("option","value",50),$("#"+a[r]+"progress").find(".ui-progressbar-value").addClass("doubleBooking"),$("#"+t[r]+"progress").find(".ui-progressbar-value").css({"float":"left"});for(var r=0;r<t.length;r++)$("#"+t[r]+"progress").find(".ui-progressbar-value").removeClass("available"),$("#"+t[r]+"progress").progressbar("option","value",50),$("#"+t[r]+"progress").find(".ui-progressbar-value").addClass("doubleBooking"),$("#"+t[r]+"progress").find(".ui-progressbar-value").css({"float":"right"});for(var r=0;r<o.length;r++)$("#"+o[r]+"KennelRow").hide(),$("#"+o[r]+"KennelRow").hasClass("editNow")&&buttonBook(o[r]+"button");$("#bookKennelsBox > .overlay").hide()}})}function atWillKennelSelect(){$(".editNow").each(function(){var e=$(this).attr("id");e=e.replace("KennelRow",""),buttonBook(e+"button")})}function addMeetGreetDate(){$("#meetGreetDateError").html(""),$("div").removeClass("redHighlight");var e=$("#meetGreetDateSelect").val();if(date2=e.split("/"),$("#"+parseInt(date2[0],10)+date2[1]+date2[2]).length)$("#meetGreetDateError").html("This date has already been added."),$("#"+parseInt(date2[0],10)+date2[1]+date2[2]).addClass("redHighlight");else if(storeMeetGreetDates(e),"Off"==$("#meetSwitch").val())$("#meetGreetSelected").append("<div id="+parseInt(date2[0],10)+date2[1]+date2[2]+" class='dayCareDateBox'><span class='meetGreetDate'>"+e+"</span><div class='dayCareDateBoxTools'><a onclick='editMeetGreetDate("+parseInt(date2[0],10)+date2[1]+date2[2]+");'>edit</a> | <a onclick='deleteMeetGreetDate("+parseInt(date2[0],10)+date2[1]+date2[2]+");'>delete</a></div></div>");else{var a=$("#meetEditId").val(),t=$("#"+a+"> .meetGreetDate").html();t=t.split("/"),newDateFormat=t[2]+"-"+t[0]+"-"+t[1];var o=meetGreetDates.indexOf(newDateFormat);meetGreetDates.splice(o,1),loadDatesForDogs(),$("#"+a).removeClass("editOn"),$("#"+a).html("<span class='meetGreetDate'>"+e+"</span><div class='dayCareDateBoxTools'><a onclick='editMeetGreetDate("+parseInt(date2[0],10)+date2[1]+date2[2]+");'>edit</a> | <a onclick='deleteMeetGreetDate("+parseInt(date2[0],10)+date2[1]+date2[2]+");'>delete</a></div>"),$("#"+a).attr("id",parseInt(date2[0],10)+date2[1]+date2[2]),$("#meetSwitch").val("Off")}}function deleteMeetGreetDate(e){var a=$("#"+e+"> .meetGreetDate").html();a=a.split("/"),newDateFormat=a[2]+"-"+a[0]+"-"+a[1];var t=meetGreetDates.indexOf(newDateFormat);meetGreetDates.splice(t,1),$("#"+e).remove(),loadDatesForDogs()}function editMeetGreetDate(e){$("#"+e).addClass("editOn"),$("#meetSwitch").val("On"),$("#meetEditId").val(e)}function loadService(){var e=$("#bookingService").val();checkIn=$("#nightCheckIn").val(),checkOut=$("#nightCheckOut").val(),"Day Care"===e?($("#bookingKennelSummaryButton").hide(),$("#meetGreetSelected").hide(),$("#overNightSelected").hide(),$("#dayCareSelected").show()):"Over Night"===e&&""!=checkOut?formatDate(checkOut)<=formatDate(checkIn)?($("#nightCheckOut").val(""),alert("You must select a date after the check in date."),$("#bookKennelsBox").hide()):(storeOverNightDates(),$(".kennelBookingRow").show(),$("#bookingKennelSummaryButton").show(),$(".progressbar").removeClass("myBooking"),$(".progressbar").find(".ui-progressbar-value").removeClass("myBooking"),$(".progressbar").find(".ui-progressbar-value").removeClass("doubleBooking"),$(".progressbar").find(".ui-progressbar-value").css({"float":"none"}),$(".progressbar").find(".ui-progressbar-value").addClass("available"),$(".progressbar").progressbar("option","value",100),$("#bookKennelsBox").show(),$("#meetGreetSelected").hide(),$("#dayCareSelected").hide(),$("#overNightSelected").show(),checkForBooking(checkIn,checkOut),$("#bookingSummary button").removeClass("selected"),$("#bookingDateSummaryButton").hide(),$("#bookingDateSummary").html("<button class='dateSummaryDate'><i class='fa fa-calendar' aria-hidden='true'></i> "+checkIn+" - "+checkOut+"<i class='fa fa-check floatRight checkmark' aria-hidden='true'></i></button>"),$("#bookingKennelSummaryButton > button").addClass("selected")):"Over Night"===e?($("#bookingKennelSummaryButton").show(),$("#meetGreetSelected").hide(),$("#dayCareSelected").hide(),$("#overNightSelected").show()):"Meet N'Greet"===e&&($("#bookingKennelSummaryButton").hide(),$("#dayCareSelected").hide(),$("#overNightSelected").hide(),$("#meetGreetSelected").show()),typeOfBooking=e}function weekendCheck(e,a,t){var o=new Date(t,parseInt(a)-1,e),r=o.getDay();return r}function holidayCheck(e){var a=holidays.indexOf(e);return a}function storeDayCareDates(e){e=e.split("/"),newDateFormat=e[2]+"-"+e[0]+"-"+e[1];var a=holidayCheck(newDateFormat);-1!=a&&holidayDates.push(newDateFormat);var t=weekendCheck(e[1],e[0],e[2]);0==t||6==t?(datesWeekend.push(newDateFormat),bookingDates.push(newDateFormat)):bookingDates.push(newDateFormat)}function storeMeetGreetDates(e){e=e.split("/"),newDateFormat=e[2]+"-"+e[0]+"-"+e[1],meetGreetDates.push(newDateFormat)}function storeOverNightDates(){bookingDates=[],holidayDates=[],datesWeekend=[],date=checkIn.split("/"),newDateFormat=date[2]+"-"+date[0]+"-"+date[1];var e=new Date(date[2],date[0]-1,date[1]);date=checkOut.split("/"),newDateFormat=date[2]+"-"+date[0]+"-"+date[1];var a=new Date(date[2],date[0]-1,date[1]),t=864e5;for(Math.round(Math.abs((e.getTime()-a.getTime())/t));a>e;){var o=e.getMonth(),r=e.getMonth()+1,i=e.getDate();e.getMonth()<=9&&(o="0"+o),9>=r&&(r="0"+r),e.getDate()<=9&&(i="0"+i);var s=e.getFullYear()+"-"+r+"-"+i;console.log(s),bookingDates.push(s);var n=holidayCheck(e.getFullYear()+"-"+r+"-"+i);-1!=n&&holidayDates.push(s);var l=weekendCheck(i,r,e.getFullYear());(0==l||6==l)&&datesWeekend.push(s),e.setDate(e.getDate()+1)}}function bookingNext(e){var a=bookingPart1Check();if(1==a){if($("#dateSummaryButton").hide(),"Day Care"==typeOfBooking){$("#bookingDateSummary").html("");for(var t=0;t<=bookingDates.length-1;t++)$("#bookingDateSummary").append("<button class='dateSummaryDate'><i class='fa fa-calendar' aria-hidden='true'></i> "+bookingDates[t]+" <i class='fa fa-check floatRight checkmark' aria-hidden='true'></i></button>");subTotal=calculatePrice(bookingDates.length,numberOfDogs),i=addTax(subTotal),addTotal(subTotal,i),0!=deposit&&changeDeposit(deposit)}else if("Meet N'Greet"==typeOfBooking){$("#bookingDateSummary").html("");for(var t=0;t<=meetGreetDates.length-1;t++)$("#bookingDateSummary").append("<button class='dateSummaryDate'><i class='fa fa-calendar' aria-hidden='true'></i> "+meetGreetDates[t]+" <i class='fa fa-check floatRight checkmark' aria-hidden='true'></i></button>");var o=0,r=o,i=$("#taxPrice").val();taxPrice=i/100*r,$("#invoiceList").html("<div class='floatLeft'>Meet N'Greet x "+meetGreetDates.length+"</div><div class='floatRight'>$"+r.toFixed(2)+"</div><div class='clear'></div>"),$("#insertTax").html('<p class="floatRight">$'+taxPrice.toFixed(2)+"</p>")}else"Over Night"==typeOfBooking&&($("#bookingKennelSummaryButton button").html("<i class='fa fa-square' aria-hidden='true'></i> Kennel(s) "+kennelsSelected),subTotal=calculatePrice(bookingDates.length,numberOfDogs),i=addTax(subTotal),addTotal(subTotal,i),0!=deposit&&changeDeposit(deposit));""!=dogsId[0]&&"Day Care"==typeOfBooking&&""==bookingid?loadDatesForDogs():""!=dogsId[0]&&"Over Night"==typeOfBooking&&loadKennelsForDogs(),$("#whichContainer").val("bookingCustomer"),whichContainer("bookingCustomer")}}function splitRePosition(){$(".overlay").hasClass("overlayHide")?($(".overlay").removeClass("overlayHide"),$("#splitBookingCalendar").css({left:"0"})):($("#splitBookingCalendar").css({left:"-9999px"}),$(".overlay").addClass("overlayHide"))}function splitDateSelected(e){var a,t=$("#"+e);if(t.hasClass("splitDateSelected")){t.removeClass("splitDateSelected");var o=selectedSplitDates.indexOf(e);selectedSplitDates.splice(o,1)}else!t.hasClass("booked")||t.hasClass("end")||t.hasClass("start")?(t.addClass("splitDateSelected"),selectedSplitDates.push(e),a=splitDateValidate()):alert("You cannot book a date that is already filled.");if(0==a){t.removeClass("splitDateSelected");var o=selectedSplitDates.indexOf(e);selectedSplitDates.splice(o,1),alert("You must select a consecutive day. Please Try Again.")}}function splitDateValidate(){if(selectedSplitDates.length>1){var e=selectedSplitDates.length,a=selectedSplitDates[e-2];a=a.split("-"),firstDate=a[1]+"/"+a[2]+"/"+a[3];var t=selectedSplitDates[e-1];t=t.split("-"),secondDate=t[1]+"/"+t[2]+"/"+t[3];var o=new Date(firstDate),r=new Date(secondDate),i=r.getTime()-o.getTime(),s=Math.ceil(i/864e5);return 1===s?!0:!1}}function saveSplitDates(){kennelsSelected=[],splitDatesForSaving=[];var e,a,t,o=0;if(selectedSplitDates.length<=1)alert("You must have at least 2 dates selected.");else{$(".splitBookingRow").remove(),$("#splitBookingBox hr").remove(),splitRePosition(),$("#overNightSelected .bookingColumn").hide(),$("#legend").hide(),$("#bookingKennels").hide(),$("#splitBookingBox").show(),$("#splitBookingButton").html('<i class="fa fa-pencil" aria-hidden="true"></i> Edit Split Booking');for(var r=0;r<=selectedSplitDates.length;r++){if(r<selectedSplitDates.length){var i=selectedSplitDates[r].split("-");a=i[0].replace("K","")}else a="";e!=a&&(0!=r&&($("#splitKennel"+o).append(" to "+t[2]+"/"+t[3]+"/"+t[1]),splitDatesForSaving.push(t[2]+"/"+t[3]+"/"+t[1])),r<selectedSplitDates.length&&(o++,e=a,$("#splitBookingBox").append("<div id='splitKennel"+o+"' class='splitBookingRow'>Kennel "+a+"<br>From: "+i[2]+"/"+i[3]+"/"+i[1]+"</div><hr>"),splitDatesForSaving.push(i[2]+"/"+i[3]+"/"+i[1]),kennelsSelected.push(a))),r<selectedSplitDates.length&&(t=selectedSplitDates[r].split("-")),0==r?checkIn=i[2]+"/"+i[3]+"/"+i[1]:r==selectedSplitDates.length-1&&(checkOut=i[2]+"/"+i[3]+"/"+i[1])}$("#bookingDateSummary").html("<button class='dateSummaryDate'><i class='fa fa-calendar' aria-hidden='true'></i> "+checkIn+" - "+checkOut+"<i class='fa fa-check floatRight checkmark' aria-hidden='true'></i></button>"),storeOverNightDates(),splitBooking=!0}}function liveSearch(){var e=$("#clientLiveSearch").val();if(" "===e||"%"===e||""===e||e.length<=3)$("#liveResult").hide();else{var a=$("#clientLiveSearch").width();$("#liveResult").width(a-7.5),$.ajax({method:"POST",url:"getResult.php",data:{search1:e}}).done(function(e){e?($("#liveResult").show(),$("#liveResult").html(e)):$("#liveResult").hide()})}}function liveSearchReset(){customerType="New",$("#clientLiveSearch").val(""),$("#liveResult").hide();for(var e=0;13>=e;e++)$("#bookingClient"+e).val("");$("#bookingLoadDogs").html("")}function liveSearchLoadClient(e,a){customerType="Old",$("#liveResult").hide(),$.ajax({method:"POST",url:"getClient.php",data:{id1:e}}).done(function(t){if(t){clientId=e,t=t.split("&"),clientName=t[0]+" "+t[1],""!=bookingid&&a();for(var o=0;o<=t.length;o++)$("#bookingClient"+o).val(t[o]);customerId=e}})}function liveSearchLoadDogs(e,a){dogsId=[],$.ajax({method:"POST",url:"getDogs.php",data:{id1:e}}).done(function(t){if($("#userId").val(e),t){for($("#addDog").hide(),$("#bookingLoadDogs").html(t),numberOfDogs=$("#dogCount").val()-1,i=1;i<=numberOfDogs;i++)dogsId.push($("#dogId"+i).val());"Day Care"==typeOfBooking?loadDatesForDogs():"Over Night"==typeOfBooking&&loadKennelsForDogs()}else numberOfDogs=0,$("#addDog").show();""!=bookingid&&a()})}function bookingClientNext(){if(""==$("#bookingClient0").val())alert("Please select a client.");else{$("#clientNext").html('<i class="fa fa-spinner fa-pulse fa-fw"></i>');var e=[""];$("#customerMessage").html(""),$("span").remove("#redError"),$("input").removeClass("error"),$("select").removeClass("error"),$("textarea").removeClass("error");for(var a=0;13>=a;a++)e[a]=$("#bookingClient"+a).val();$.ajax({method:"POST",url:"saveCustomerBooking.php",data:{clientInfo1:e,customerType1:customerType,customerId1:customerId}}).done(function(e){if($("#clientNext").html("Next"),"Fail"===e)$("#customerMessage").html("Something went wrong. Please try again.");else if("customerFirst"===e)$("#bookingClient0").addClass("error"),$("html, body").animate({scrollTop:$("#bookingClient0").offset().top-25},"slow"),$("#bookingClient0").before("<span id='redError'>This field is required.</span>");else if("customerLast"===e)$("#bookingClient1").addClass("error"),$("#bookingClient1").before("<span id='redError'>This field is required.</span>"),$("html, body").animate({scrollTop:$("#bookingClient1").offset().top-25},"slow");else if("customerPhone"===e)$("#bookingClient3").addClass("error"),$("#bookingClient3").before("<span id='redError'>Please remove any spaces or dashes.</span>"),$("body").animate({scrollTop:$("#bookingClient3").offset().top-25},"slow");else if("customerEphone"===e)$("#bookingClient12").addClass("error"),$("#bookingClient12").before("<span id='redError'>Please remove any spaces or dashes.</span>"),$("body").animate({scrollTop:$("#bookingClient12").offset().top-25},"slow");else if("customerMobile"===e)$("#bookingClient4").addClass("error"),$("#bookingClient4").before("<span id='redError'>Please remove any spaces or dashes.</span>"),$("body").animate({scrollTop:$("#bookingClient4").offset().top-25},"slow");else if("customerWork"===e)$("#bookingClient5").addClass("error"),$("#bookingClient5").before("<span id='redError'>Please remove any spaces or dashes.</span>"),$("body").animate({scrollTop:$("#bookingClient5").offset().top-25},"slow");else if("customerEmail"===e)$("#bookingClient2").addClass("error"),$("#bookingClient2").before("<span id='redError'>Not a valid email.</span>"),$("body").animate({scrollTop:$("#bookingClient2").offset().top-25},"slow");else{$("#customerMessage").html(""),
$("span").remove("#redError"),$("input").removeClass("error"),$("select").removeClass("error"),$("textarea").removeClass("error"),alert("Saved"),customerId=e,"New"==customerType&&(liveSearchLoadDogs(customerId),customerType="Old"),subTotal=calculatePrice(bookingDates.length,numberOfDogs),tax=addTax(subTotal),addTotal(subTotal,tax);var a=$("#bookingClient0").val()+" "+$("#bookingClient1").val();$("#bookingCustomerSummaryButton").html("<i class='fa fa-users' aria-hidden='true'></i> "+a),whichContainer("bookingPet")}})}}function loadDatesForDogs(){var e=bookingDates.length;if("Day Care"==typeOfBooking)if(1>numberOfDogs||0>e)$(".bookingChoice").hide(),$(".bookingChoiceLabel").hide();else{$(".bookingChoice").show(),$(".bookingChoiceLabel").show(),$(".bookingChoiceLabel").hide();for(var a=0;numberOfDogs-1>=a;a++){var t="#bookingChoice"+(a+1);if($(t+" option").remove(),$(t).attr("multiple","multiple"),$(t).hide(),$(t).attr("data-placeholder","Choose your dates ..."),$(t).attr("tabindex","2"),$(t).addClass("chosen-select"),$("#dateSelectDog"+(a+1)).removeClass("floatRight"),""!=bookingid){var o=dayCareDates[a];if(void 0==o);else{o=o.replace(/\"/g,""),o=o.replace(/[\[\]']+/g,""),o=o.split("*");for(var r=0;e-1>=r;r++)$(t).append("<option name='date' value='"+bookingDates[r]+"'>"+bookingDates[r]+"</option>");for(var i=0;i<=o.length-2;i++)$(t+" option[value="+o[i]+"]").attr("selected",!0)}}else for(var r=0;e-1>=r;r++)$(t).append("<option name='date' value='"+bookingDates[r]+"' selected>"+bookingDates[r]+"</option>");$(t).trigger("chosen:updated"),$(t).chosen({width:"100%"})}}}function loadKennelsForDogs(){var e=$("#dogCount").val();kennelsSelected.length;$(".bookingChoice").show(),$(".bookingChoiceLabel").show();for(var a=0;e-2>=a;a++)loadKennelSelect(a+1)}function loadKennelSelect(e){var a=kennelsSelected.length;if($("#bookingChoice"+e).html("<option name='kennel' value='None'>None</option>"),0==splitBooking)for(var t=0;a-1>=t;t++)$("#bookingChoice"+e).append("<option name='kennel' value='"+kennelsSelected[t]+"'>Kennel "+kennelsSelected[t]+"</option>");else $("#bookingChoice"+e).append("<option name='kennel' value='Set'>Kennel Set</option>")}function clickSelectDatesButton(e){e=e.replace("bookingChoice",""),$("#bookingChoicePopUp"+e).toggle()}function retrieveCheckListDates(e){var a=[];return $("#dateSelectDog"+e).find(".search-choice").each(function(){a.push($(this).text())}),a}function dogsKennelSet(){var e,a,t,o,r=$("#overNightPrice").val(),i=$("#overNightAdditionalPrice").val(),s=$("#weekendPrice").val(),n=$("#weekendActive").val(),l=$("#holidayPrice").val(),d=$("#holidayActive").val(),c=0;$("#invoiceList").html(""),1==n&&(e=parseInt(s,10)*datesWeekend.length),1==d&&(a=l*holidayDates.length);for(var p=0;numberOfDogs-1>=p;p++){var h=$("#dateSelectDog"+(p+1)+" input[type=radio]:checked").val(),g="kennelContainer"+h;0==$("#"+g).length?(o=r*bookingDates.length+e+a,c+=o,$("#invoiceList").append("<div id='"+g+"'>Kennel "+h+"<div class='clear'></div></div><hr>"),$("#"+g).append("<div class='floatLeft'>Dog "+(p+1)+" "+typeOfBooking+" x "+bookingDates.length+"</div><div class='floatRight'>$"+o.toFixed(2)+"</div><div class='clear'></div>")):(t=i*bookingDates.length+e+a,c+=t,$("#"+g).append("<div class='floatLeft'>Dog "+(p+1)+" "+typeOfBooking+" x "+bookingDates.length+"</div><div class='floatRight'>$"+t.toFixed(2)+"</div><div class='clear'></div>"))}subTotal=c,$("#insertSubTotal").html("$"+c.toFixed(2));var v=addTax(c);addTotal(c,v);for(var u="",p=1;numberOfDogs>=p;p++)u=u+$("#dogName"+p).html()+", ";$("#bookingPetSummaryButton").html("<i class='fa fa-paw' aria-hidden='true'></i> "+u),whichContainer("bookingCost")}function loadDogsDayCarePrice(){for(var e,a=$("#dayCarePrice").val(),t=$("#dayCareAdditionalPrice").val(),o=$("#weekendPrice").val(),r=$("#weekendActive").val(),i=$("#holidayPrice").val(),s=$("#holidayActive").val(),n=0,l=1;numberOfDogs>=l;l++){e=retrieveCheckListDates(l);var d=e.length,c=0,p=0;if(1==r){for(var h=0;d-1>=h;h++){var g=e[h],v=datesWeekend.indexOf(g);-1!=v&&c++}var u=parseInt(o,10)*c}if(1==s){for(var h=0;d-1>=h;h++){var g=e[h],f=holidayDates.indexOf(g);-1!=f&&p++}var m=i*p}if(1==l){var k=a*d+u+m;n+=k,$("#priceList"+l).html("<div class='floatLeft'>Dog "+l+" Daycare x "+d+"</div><div class='floatRight'>$"+k.toFixed(2)+"</div>")}else{var b=t*d+u+m;n+=b,$("#priceList"+l).html("<div class='floatLeft'>Dog "+l+" Daycare x "+d+"</div><div class='floatRight'>$"+b.toFixed(2)+"</div>")}}n+=reloadOtherCharges(n),subTotal=n,$("#insertSubTotal").html("$"+n.toFixed(2));var D=addTax(n);addTotal(n,D),0!=deposit&&changeDeposit(deposit);for(var C="",l=1;numberOfDogs>=l;l++)C=C+$("#dogName"+l).html()+", ";$("#bookingPetSummaryButton").html("<i class='fa fa-paw' aria-hidden='true'></i> "+C)}function loadDogsOverNightPrice(){var e,a,t,o,r=$("#overNightPrice").val(),i=$("#overNightAdditionalPrice").val(),s=$("#weekendPrice").val(),n=$("#weekendActive").val(),l=$("#holidayPrice").val(),d=$("#holidayActive").val(),c=0;$("#invoiceList").html(""),1==n&&(e=parseInt(s,10)*datesWeekend.length),1==d&&(a=l*holidayDates.length);for(var p="",h=0;numberOfDogs-1>=h;h++){var g=$("#dateSelectDog"+(h+1)+" option:selected").val();if("None"!=g){var v="kennelContainer"+g;0==$("#"+v).length?(o=r*bookingDates.length+e+a,c+=o,$("#invoiceList").append("<div id='"+v+"'>Kennel "+g+"<div class='clear'></div></div><hr>"),$("#"+v).append("<div class='floatLeft'>Dog "+(h+1)+" "+typeOfBooking+" x "+bookingDates.length+"</div><div class='floatRight'>$"+o.toFixed(2)+"</div><div class='clear'></div>")):(t=i*bookingDates.length+e+a,c+=t,$("#"+v).append("<div class='floatLeft'>Dog "+(h+1)+" "+typeOfBooking+" x "+bookingDates.length+"</div><div class='floatRight'>$"+t.toFixed(2)+"</div><div class='clear'></div>")),p=p+$("#dogName"+(h+1)).html()+", "}}var c=c+reloadOtherCharges(c);subTotal=c,$("#insertSubTotal").html("$"+c.toFixed(2));var u=addTax(c);addTotal(c,u),0!=deposit&&changeDeposit(deposit),$("#bookingPetSummaryButton").html("<i class='fa fa-paw' aria-hidden='true'></i> "+p)}function bookingDogNext(){var e=bookingPart2Check();e&&"Day Care"==typeOfBooking?(loadDogsDayCarePrice(),whichContainer("bookingCost")):e&&(loadDogsOverNightPrice(),whichContainer("bookingCost"))}function bookingDeleteDog(e,a){$.post("bookingDogsDelete.php",{dogid1:e},function(e){"Success"===e?(alert("success"),liveSearchLoadDogs(a)):alert("Something went wrong.")})}function bookingUpdateDog(e,a){$("#update"+a).html('<i class="fa fa-spinner fa-pulse fa-fw"></i>'),$("#addDogMessage"+a).html(""),$("span").remove("#redError"),$("input").removeClass("error"),$("select").removeClass("error"),$("textarea").removeClass("error");var t=$("#dogId"+a).val(),o=$("#addName"+a).val(),r=$("#addBreed"+a).val(),i=$("#addColor"+a).val(),s=$("#addAge"+a).val(),n=$("#addGender"+a).val(),l=$("#addFixed"+a).val(),d=$("#addWeight"+a).val(),c=$("#addVdate"+a).val(),p=$("#addVphone"+a).val(),h=$("#addVname"+a).val(),g=$("#addBrand"+a).val(),v=$("#addOften"+a).val(),u=$("#addAmount"+a).val(),f=$("#addMessage"+a).val();$.post("dogUpdate.php",{dogid1:t,name1:o,breed1:r,color1:i,gender1:n,age1:s,fixed1:l,weight1:d,brand1:g,amount1:u,often1:v,vdate1:c,vname1:h,vphone1:p,message1:f},function(t){$("#update"+a).html("Save Dog"),"Success"==t?($("#addDogMessage"+a).html(""),$("span").remove("#redError"),$("input").removeClass("error"),$("select").removeClass("error"),$("textarea").removeClass("error"),liveSearchLoadDogs(e),$(".editDog").hide()):"Fail"==t?$("#addDogMessage"+a).html("Something went wrong. Please try again."):"addVdate"===t?($("#"+t).addClass("error"),$("body").animate({scrollTop:$("#"+t+a).offset()},"slow"),$("#"+t+a).before("<span id='redError'>Already Expired.</span>"),$("body").animate({scrollTop:$("#redError").offset().top},"slow")):"addVphone"===t?($("#"+t+a).addClass("error"),$("#"+t+a).before("<span id='redError'>Please enter a phone number.</span>"),$("body").animate({scrollTop:$("#redError").offset().top},"slow")):"addFixed"===t?($("#"+t+a).addClass("error"),$("#"+t+a).before("<span id='redError'>This is a requirement after 8 months.</span>"),$("body").animate({scrollTop:$("#redError").offset().top},"slow")):"addName"===t&&($("#"+t+a).addClass("error"),$("#"+t+a).before("<span id='redError'>This field is required.</span>"),$("body").animate({scrollTop:$("#redError").offset().top},"slow"))})}function loadCostList(){$.ajax({method:"POST",url:"loadCostList.php"}).done(function(e){if("Fail"!=e){e=e.split("&");var a;a=e[0].replace(/\"/g,""),a=a.replace(/[\[\]']+/g,""),loadAdditionalDesc=a.split(","),a=e[1].replace(/\"/g,""),a=a.replace(/[\[\]']+/g,""),loadAdditionalPrice=a.split(","),a=e[2].replace(/\"/g,""),a=a.replace(/[\[\]']+/g,""),loadAdditionalType=a.split(",")}})}function loadCostListDetails(e){var a=$("#"+e+" .extraChargeChoice").val();$("#"+e+" .extraChargeDesc").val(loadAdditionalDesc[a]),$("#"+e+" .extraChargePrice").val(loadAdditionalPrice[a]),$("#"+e+" .extraChargeType").val(loadAdditionalType[a]),addExtraChargePrice(e)}function loadOtherCharge(){for(var e="",a=0;a<=loadAdditionalDesc.length-1;a++)e=e+"<option value='"+a+"'>"+loadAdditionalDesc[a]+"</option>";var t=$("#otherChargeCount").val();t++,$("#addChargeBox").append("<div id='extraCharge"+t+"' class='extraCharge newCharge'><div class='formInput'><label>Quantity</label><br/><input onchange='updateExtraChargePrice(\"extraCharge"+t+"\");' class='extraChargeQuantity' type='number' min='1' value='1'/></div><div class='formInput'><label>Charge</label><br/><select class='extraChargeChoice' onchange='loadCostListDetails(\"extraCharge"+t+"\");'><option>Other</option>"+e+"</select></div><div class='formInput'><label>Description</label><br/><input onchange='updateExtraChargePrice(\"extraCharge"+t+"\");' class='extraChargeDesc' type='text' value=''/></div><div class='formInput'><label>Cost</label><br/><input onchange='updateExtraChargePrice(\"extraCharge"+t+"\");' class='extraChargePrice' type='number' value='1'/></div><div class='formInput'><label>Type</label><br/><select onchange='updateExtraChargePrice(\"extraCharge"+t+"\");' class='extraChargeType'><option>Fixed</option><option>Percentage</option></select></div><div id='deleteExtraCharge"+t+"' class='deleteExtraCharge' onclick='deleteOtherCharge($(this).attr(\"id\"));'><i class='fa fa-times' aria-hidden='true'></i></div></div>"),$("#otherChargeCount").val(t)}function deleteOtherCharge(e){var a=e.replace("deleteExtraCharge",""),t=$("#otherChargeCount").val(),o=additionalId.indexOf("extraCharge"+a);if($("#extraCharge"+a).hasClass("updateCharge")&&deleteIdList.push(o),$("#extraCharge"+a).remove(),$("#extraCharge"+a+"Item").remove(),$("#otherChargeCount").val(t-1),$(".extraCharge").each(function(){var e=$(this).attr("id"),a=e.replace("extraCharge","");a>=t&&($(this).attr("id","extraCharge"+(a-1)),$("#deleteExtraCharge"+a).attr("id","deleteExtraCharge"+(a-1)))}),-1!=o){additionalId.splice(o,1),additionalNames.splice(o,1);var r=additionalPrices[o]*additionalQuantity[o];subTotal-=r,additionalQuantity.splice(o,1),additionalType.splice(o,1),additionalDesc.splice(o,1),additionalPrices.splice(o,1),addTax(subTotal),addTotal(subTotal,tax),$("#insertSubTotal").html("$"+subTotal.toFixed(2))}}function updateExtraChargePrice(e){var a=additionalId.indexOf(e);-1==a&&(additionalId.push(e),a=additionalId.indexOf(e)),$("#"+e+" input").removeClass("error");var t=$("#"+e+" .extraChargePrice").val(),o=$("#"+e+" .extraChargeDesc").val(),r=$("#"+e+" .extraChargeType").val(),i=$("#"+e+" .extraChargeQuantity").val(),s=!0;if(""==t&&($("#"+e+" .extraChargePrice").addClass("error"),s=!1),""==o&&($("#"+e+" .extraChargeDesc").addClass("error"),s=!1),""==i&&($("#"+e+" .extraChargeQuantity").addClass("error"),s=!1),1==s){if(additionalNames[a]=o,additionalQuantity[a]=i,additionalType[a]=r,additionalDesc[a]=o,"Fixed"==r){additionalPrices[a]=t;var n=t*i;subTotal+=n}else{additionalPrices[a]=t/100*subTotal;var n=t/100*subTotal*i;subTotal+=n}$("#insertSubTotal").html("$"+subTotal.toFixed(2)),addTax(subTotal),addTotal(subTotal,tax),0==$("#"+e+"Item").length?$("#extraChargesList").append("<div id='"+e+"Item'><div class='floatLeft'>"+o+" x "+i+"</div> <div class='floatRight'>$"+n.toFixed(2)+"</div></div><div class='clear'></div>"):$("#"+e+"Item").html("<div class='floatLeft'>"+o+" x "+i+"</div> <div class='floatRight'>$"+n.toFixed(2)+"</div>")}}function reloadOtherCharges(e){for(var a=0,t=0;t<=additionalPrices.length-1;t++)if("Fixed"==additionalType[t])a=additionalPrices[t]*additionalQuantity[t]+a;else{var o=$("#"+additionalId[t]+" .extraChargePrice").val(),r=o/100*e*additionalQuantity[t];a=r+a,$("#"+additionalId[t]+"Item").html("<div class='floatLeft'>"+additionalDesc[t]+" x "+additionalQuantity[t]+"</div> <div class='floatRight'>$"+r.toFixed(2)+"</div>")}return a}function changeDeposit(e){e=parseFloat(e),deposit=e,addTotal(subTotal,tax),0==e||""==e?$("#insertDeposit").html(""):e>total?($("#insertDeposit").html(""),alert("The deposit cannot be more than the total price.")):(depositTotal=subTotal-e,addTotal(depositTotal,tax),$("#insertDeposit").html("<div class='floatLeft'>Deposit:</div><div class='floatRight'>- $"+e.toFixed(2)+"</div>"))}function addTax(e){taxPercent=$("#taxPrice").val(),taxPercent/=100,tax=taxPercent*e;var a=tax;return $("#insertTax").html("$"+a.toFixed(2)),a}function calculatePrice(e,a){if("Day Care"==typeOfBooking)var t=$("#dayCarePrice").val(),o=$("#dayCareAdditionalPrice").val(),r=$("#weekendPrice").val(),i=$("#weekendActive").val(),s=$("#holidayPrice").val(),n=$("#holidayActive").val();else if("Over Night"==typeOfBooking)var t=$("#overNightPrice").val(),o=$("#overNightAdditionalPrice").val(),r=$("#weekendPrice").val(),i=$("#weekendActive").val(),s=$("#holidayPrice").val(),n=$("#holidayActive").val();if(1==n)var l=s*holidayDates.length;else var l=0;if(1==i)var d=parseInt(r,10)*datesWeekend.length;else var d=0;var c=t*e+d+l,p=o*e+d+l,h=0;if(a>1){$("#invoiceList").html("");for(var g=1;a>=g;g++)1==g?($("#invoiceList").append("<span id='priceList"+g+"'><div class='floatLeft'>Dog "+g+" "+typeOfBooking+" x "+e+"</div><div class='floatRight'>$"+c.toFixed(2)+"</div></span><div class='clear'></div>"),h+=c):($("#invoiceList").append("<span id='priceList"+g+"'><div class='floatLeft'>Dog "+g+" "+typeOfBooking+" x "+e+"</div><div class='floatRight'>$"+p.toFixed(2)+"</div></span><div class='clear'></div>"),h+=p);h+=reloadOtherCharges(h),$("#subTotal").show(),$("#insertSubTotal").html("$"+h.toFixed(2))}else $("#invoiceList").html("<div class='floatLeft'>"+typeOfBooking+" x "+e+"</div><div class='floatRight'>$"+c.toFixed(2)+"</div><div class='clear'></div>"),h=c+reloadOtherCharges(c),$("#subTotal").hide();return h}function addTotal(e,a){total=e+a,$("#insertTotal").html("$"+total.toFixed(2))}function adjustPrice(e){var a=$("#"+e).find("input:checked").length,t=$("#dayCarePrice").val(),o=t*a;e=e.replace("dateSelectDog",""),0==a?$("#priceList"+e).hide():$("#priceList"+e).html("<div class='floatLeft'>Dog "+e+" "+typeOfBooking+" x "+a+"</div><div class='floatRight'>$"+o.toFixed(2)+"</div>")}function sendEmail(e){var a=$("#bookingClient0").val()+" "+$("#bookingClient1").val(),t=$("#bookingClient2").val();if("Over Night"==typeOfBooking)var o=formatDate(checkOut);$.ajax({method:"POST",url:"sendEmail.php",data:{email:t,name:a,bookingDates:bookingDates,typeOfBooking:typeOfBooking,newCheckOut:o}}).done(function(a){location.href="booking.php?bookingid="+e})}function saveCosts(){var e=subTotal+tax,a=$("#priceRowId").val(),t=$("#paymentType").val(),o=$("#paymentNote").val();$.ajax({method:"POST",url:"saveCosts.php",data:{priceRow:a,subTotal:subTotal,tax:tax,finalTotal:e,deposit:deposit,paymentType:t,typeOfBooking:typeOfBooking,clientId:clientId,paymentNote:o}}).done(function(e){"Over Night"==typeOfBooking?saveOverNight():saveAppointment()})}function saveAdditional(e){$.ajax({method:"POST",url:"saveAdditional.php",data:{additionalDesc:additionalDesc,additionalQuantity:additionalQuantity,additionalPrices:additionalPrices,additionalType:additionalType}}).done(function(a){window.location.href.indexOf("bookingid")>-1?location.href="booking.php?bookingid="+e:"Success"==a&&""!=$("#bookingClient2").val()?sendEmail(e):"Success"==a?location.href="booking.php?bookingid="+e:alert("Something went wrong!")})}function saveAppointment(){for(var e,a=0,t=0;numberOfDogs-1>=t;t++){var o=dogsId[t],r=$("#bookingChoice"+(t+1)+" option:selected").map(function(){return $(this).val()}).get();$.ajax({method:"POST",url:"saveAppointment.php",data:{selectedDates:r,clientId:clientId,id:o}}).done(function(t){"Fail"!=t&&(e=t,a++,a==numberOfDogs&&0!=additionalDesc.length?saveAdditional(e):a==numberOfDogs&&""!=$("#bookingClient2").val()?sendEmail(e):a==numberOfDogs&&(location.href="schedule/booking.php?bookingid="+e))})}}function saveOverNight(){for(var e,a=0,t=formatDate(checkIn),o=formatDate(checkOut),r="",i=0;i<=kennelsSelected.length-1;i++){for(var s=kennelsSelected[i],n=new Array,l=0;numberOfDogs-1>=l;l++){var d=$("#bookingChoice"+(l+1)+" option:selected").val();s==d&&0==splitBooking?n.push(dogsId[l]):"Set"==d&&1==splitBooking&&n.push(dogsId[l])}1==splitBooking&&i!=kennelsSelected.length-1?(t=splitCheckIn[i],o=splitCheckOut[i],r="split"):"split"==r&&i==kennelsSelected.length-1&&(t=splitCheckIn[i],o=splitCheckOut[i],r=""),$.ajax({method:"POST",url:"saveOverNight.php",data:{newCheckIn:t,newCheckOut:o,kennelDogs:n,clientId:clientId,kennel:s,splitValue:r}}).done(function(t){"Fail"!=t&&(e=t,a++,a==kennelsSelected.length&&0!=additionalDesc.length?saveAdditional(e):a==kennelsSelected.length&&""!=$("#bookingClient2").val()?sendEmail(e):a==kennelsSelected.length&&(location.href="booking.php?bookingid="+e))})}}function splitCheckingDates(){for(var e,a=0;a<=splitDatesForSaving.length-1;a+=2)e=formatDate(splitDatesForSaving[a]),splitCheckIn.push(e),e=formatDate(splitDatesForSaving[a+1]),splitCheckOut.push(e)}function isBooked(e,a,t){$.ajax({method:"POST",url:"isBooked.php",data:{startdate:e,enddate:a,kennels:t,splitBooking:splitBooking}}).done(function(e){"success"==e?window.location.href.indexOf("bookingid")>-1?updateCosts():saveCosts():alert("Sorry some of the dates you selected are already booked.")})}function saveBooking(e){if($(".overlay").removeClass("overlayHide"),$(".loadingContainer").css({left:"45%"}),$("#bookingDateSummaryButton").hasClass("selected"))alert("Please select a date.");else if($("#bookingCustomerSummaryButton").hasClass("selected"))alert("Please select a client.");else if($("#bookingPetSummaryButton").hasClass("selected"))alert("Please select your pets.");else if("Over Night"==typeOfBooking)if(1==splitBooking){splitCheckingDates();var a=kennelsSelected;isBooked(splitCheckIn,splitCheckOut,a)}else{var t=formatDate(checkIn),o=formatDate(checkOut),a=kennelsSelected;isBooked(t,o,a)}else saveCosts()}function bookingPart1Check(){var e=!0;if($(".dayCareDateBox").length||"Over Night"==typeOfBooking){if("Over Night"==typeOfBooking&&""==$("#nightCheckOut").val()){var e=!1;alert("Please select a checkout date.")}else if("Over Night"==typeOfBooking&&0==kennelsSelected.length){var e=!1;alert("Please select a kennel.")}}else{var e=!1;alert("Please select a date.")}return e}function bookingPart2Check(){var e=!0;return 0==numberOfDogs&&(alert("Please add a dog."),e=!1),e}function updateDragBooking(e,a){startDate=a[0].split("-");var t=startDate[0];t=t.replace("K",""),startDate.splice(0,1),endDate=a[a.length-1].split("-"),endDate.splice(0,1),$.ajax({method:"POST",url:"updateBooking.php",data:{startDatesArray:startDate,endDatesArray:endDate,id:e,kennel:t}}).done(function(e){"Fail"===e&&alert("There was a problem editing the booking!")})}function editableBookings(){$(".draggable").draggable({create:function(){$(this).data("position",$(this).position())},cancel:".split",cursor:"move",start:function(){$(this).stop(!0,!0)},containment:"#calendar",scrollSensitivity:100,revert:"invalid"});var e,a,t;$(".calendarTD").droppable({accept:".draggable",tolerance:"pointer",drop:function(o,r){var i=$(r.draggable).find(".startDate").val(),s=$("td").index($("#"+i));$("#"+i).removeClass("booked"),$("#"+i).find("button").addClass("bookButton");for(var n=1;t-1>=n;n++){var l=$("td").eq(s+n).attr("id");$("#"+l).removeClass("booked"),$("#"+l).find("button").addClass("bookButton")}$(r.draggable).css({top:e.top+16,left:e.left,marginLeft:"11px"}),$(r.draggable).find(".startDate").val(a),$("#"+a).find("button").removeClass("bookButton"),$("#"+a).find("button").hide(),$("#"+a).addClass("booked"),s=$("td").index($("#"+a));for(var d=[a],n=1;t-1>=n;n++){var l=$("td").eq(s+n).attr("id");d[n]=l,$("#"+l).find("button").removeClass("bookButton"),$("#"+l).find("button").hide(),$("#"+l).addClass("booked")}$("#bookDragHighLight").hide(),updateDragBooking($(r.draggable).attr("id"),d)},over:function(o,r){if(!$(this).hasClass("booked")){$("#bookDragHighLight").width("76"),a=$(this).attr("id"),e=$("#"+a).position();var i=Math.round($(r.draggable).width()/76);t=i;var s=85*i;$("#bookDragHighLight").show(),$("#bookDragHighLight").width(s),$("#bookDragHighLight").css({top:e.top,left:e.left}),s=0,i=0}}}),$(".draggable").droppable({drop:function(){alert("Sorry one these dates is already booked!")},over:function(){$("#bookDragHighLight").hide()}})}function loadBookings(e,a,t){$.ajax({method:"POST",url:"getBookings.php",data:{month1:e,year1:a,day1:t}}).done(function(e){$("#calendarDates").position();if(null==t)var a="11px",o="66px",r=87,i=77,s="44px",n="33px",l=36,d=15;else if(window.location.href.indexOf("printWeek")>-1)var a="12.13px",o="72.8px",r=95.96,i=84.93,s="48.53px",n="36.4px",l=39.7,d=10;else var a="17.82px",o="106.92px",r=140.94,i=124.74,s="71.28px",n="53.46px",l=58.32,d=15;e=e.split("&");for(var c,p,h,g=0;g<=e.length-2;g++){var v=e[g];if(v=v.split("*"),""!=v[4]&&"split"==v[2]&&$("#"+v[1]).remove(),$("#"+v[0]).find("button").removeClass("bookButton"),$("#"+v[0]).find("button").hide(),v[1]!=c){if($("#"+c).width($("#"+c).width()-10),$("#"+p).addClass("end"),$("."+v[3]).length){var u="<div id='"+v[1]+"' class='draggable ui-widget-content split "+v[3]+"'><i class='fa fa-chevron-right floatLeft black start' aria-hidden='true'></i><i class='fa fa-info-circle bookingInfoButton' aria-hidden='true'></i><div class='dogNamesCalendar'>"+v[4]+"</div><input class='startDate' type='hidden' value='"+v[0]+"'/><input class='endDate' type='hidden' value=''/><input class='bookingNames' type='hidden' value='"+v[4]+"'/><input class='bookingDogIds' type='hidden' value='"+v[5]+"'/></div>";$("#bookingBlocks").append(u),h=$("#"+v[0]).position(),"split"==v[2]&&$("#"+v[1]).append('<i class="fa fa-chevron-right floatRight black end" aria-hidden="true"></i>')}else $("#bookingBlocks").append("<div id='"+v[1]+"' class='draggable ui-widget-content "+v[3]+"'><i class='fa fa-info-circle bookingInfoButton' aria-hidden='true'></i><div class='dogNamesCalendar'>"+v[4]+"</div><input class='startDate' type='hidden' value='"+v[0]+"'/><input class='endDate' type='hidden' value=''/><input class='bookingNames' type='hidden' value='"+v[4]+"'/><input class='bookingDogIds' type='hidden' value='"+v[5]+"'/></div>"),h=$("#"+v[0]).position(),$("#"+v[1]).css({top:h.top+d,left:h.left,marginLeft:a,width:o}),"split"==v[2]&&($("#"+v[1]).append('<i class="fa fa-chevron-right floatRight black end" aria-hidden="true"></i>'),$("#"+v[1]).addClass("split"),$("#"+v[1]+"> .endDate").val(v[0]));if($("#"+v[0]).hasClass("booked")){$("#"+v[1]).css({top:h.top+d,left:h.left,marginLeft:s,width:n});var f=$("#"+c).width();$("#"+c).width(f-l)}else void 0==h&&(alert(v[0]),h=$("#"+v[0]).position()),$("#"+v[1]).css({top:h.top+d,left:h.left,marginLeft:a,width:o}),$("#"+v[0]).addClass("booked"),$("#"+v[0]).addClass("start")}else g==e.length-2?($("#"+v[1]).width($("#"+v[1]).width()+i),$("#"+v[0]).addClass("booked"),$("#"+v[0]).addClass("end"),$("#"+v[1]+"> .endDate").val(v[0])):($("#"+v[1]).width($("#"+v[1]).width()+r),$("#"+v[0]).addClass("booked"),$("#"+v[1]+"> .endDate").val(v[0]));c=v[1],p=v[0]}$(".bookingInfoButton").click(function(){var e=$(this).parent().attr("id"),a=$("#"+e).find(".startDate").val();$("#popCheckIn").html(a.substring(3));var t=$("#"+e).find(".endDate").val();$("#popCheckOut").html(t.substring(3));var o=$("#"+e).find(".bookingNames").val(),r=$("#"+e).find(".bookingDogIds").val();o=o.split(" "),r=r.split(" "),$("#popDogNames").html("");for(var i=1;i<=o.length-1;i++)$("#popDogNames").append("<button onclick='location.href=\"kennelsheet.php?dogid="+r[i]+"\";'>"+o[i]+"</button>");var s=$("#"+e).offset(),n=$("#calendarContainer").offset();hideAndSeek("bookingPopUp"),$(".bookingPopUp").css({top:s.top-n.top,left:s.left-20})})})}function hideAndSeek(e){var a=$("."+e).css("display");"none"==a?$("."+e).show():$("."+e).hide()}function adjustPosition(e){adjustedWidth=87*e,$(".draggable").each(function(){var e=$(this).position();$(this).css({left:e.left+adjustedWidth})})}function daysInMonth(e,a){return new Date(a,e,0).getDate()}var previousProfileSelection="profilePersonal",bookingid="",bookingDates=new Array,datesWeekend=new Array,holidayDates=new Array,checkIn,checkOut,splitBooking=!1,splitCheckIn=new Array,splitCheckOut=new Array,meetGreetDates=new Array,kennelsSelected=new Array,kennelsUsed=new Array,holidays=[],numberOfDogs=1,clientId,dogsId=new Array,tax,subTotal,additionalId=new Array,additionalNames=new Array,additionalPrices=new Array,additionalQuantity=new Array,additionalType=new Array,additionalDesc=new Array,loadAdditionalDesc=new Array,loadAdditionalPrice=new Array,loadAdditionalType=new Array,total,deposit=0,additionOnLoad=!1,updateAdditionalId=[""],typeOfBooking="",paymentType="",bookingDate="",paymentNote="",clientName,selectedSplitDates=new Array,splitDatesForSaving=new Array;$(document).ready(function(){var e=window.location.href;navSelected(e),$(".mobileNavIcon").click(function(){$("body").toggleClass("contentMove"),$(".mobileNavIcon").toggleClass("contentMove"),$(".mobileNav").toggleClass("navOpen")}),$(".reportsMobile").click(function(){$(".reportsMobile i").toggleClass("fa-rotate-180"),$(".haveToMove").toggleClass("iMoved"),$(".reportsDrop").toggleClass("subMenuOpen")}),$("#arrivalBack").click(function(){var e=$("#arrivalDate").val();clickDate(e,"back","arrival")}),$("#arrivalNext").click(function(){var e=$("#arrivalDate").val();clickDate(e,"next","arrival")}),$("#arrivalContainer").swipe({swipe:function(e,a,t,o,r,i){if("right"==a){var s=$("#arrivalDate").val();clickDate(s,"back","arrival")}else if("left"==a){var s=$("#arrivalDate").val();clickDate(s,"next","arrival")}}}),$("#departureBack").click(function(){var e=$("#departureDate").val();clickDate(e,"back","departure")}),$("#departureNext").click(function(){var e=$("#departureDate").val();clickDate(e,"next","departure")}),$("#departureContainer").swipe({swipe:function(e,a,t,o,r,i){if("right"==a){var s=$("#departureDate").val();clickDate(s,"back","departure")}else if("left"==a){var s=$("#departureDate").val();clickDate(s,"next","departure")}}}),$("#appointmentBack").click(function(){var e=$("#appointmentDate").val();clickDate(e,"back","appointment")}),$("#appointmentNext").click(function(){var e=$("#appointmentDate").val();clickDate(e,"next","appointment")}),$("#appointmentContainer").swipe({swipe:function(e,a,t,o,r,i){if("right"==a){var s=$("#appointmentDate").val();clickDate(s,"back","appointment")}else if("left"==a){var s=$("#appointmentDate").val();clickDate(s,"next","appointment")}}}),$("#outstandingDateRangeForm > #dateRange2").keypress(function(e){13==e.which&&$("#outstandingDateRangeForm").submit()}),$("#customerSearch").keypress(function(e){13==e.which&&$("#customerSearchForm").submit()}),$("#customerDataTable tr td").click(function(){$(this).hasClass("dogs")||(window.document.location=$(this).data("href"))}),$(".profileMenu").click(function(){var e=$(this).attr("id");profileSelect(e)}),$(".addDogButtons").click(function(e){e.preventDefault(),addDogForm()}),$("#saveDogButton").click(function(){event.preventDefault();var e=$("#userId").val();""!=e?saveDog(e):alert("Please select a client first.")}),$(".toggle-button").on("click",function(e){$(this).toggleClass("toggleChange"),$(".toggle-button i").toggleClass("fa-rotate-180"),$(".mobileSummary").toggleClass("menuToggleChange")}),$(function(){$("#calendarSplitDates").scroll(function(){console.log($("#calendarSplitDates").scrollLeft()+" "+($("#calendarSplitDates table").width()-$("#calendarSplitDates").width())),$("#calendarSplitDates").scrollLeft()==Math.round($("#calendarSplitDates table").width()-$("#calendarSplitDates").width())&&(nextMonth>=12?(nextMonth=1,nextYear++):nextMonth++,$(this).css({cursor:"progress"}),$.ajax({method:"POST",url:"nextSplitMonth.php",data:{month:nextMonth,year:nextYear}}).done(function(e){var a=e.split("*");$("#calendarDateRow").append(a[0]);for(var t=1;t<=a.length;t++)$("#kennel"+t).append(a[t]);loadBookings(nextMonth,nextYear),$("#calendarSplitDates").css({cursor:"default"})}))})}),$(function(){$("#calendarSplitDates").scroll(function(){0==$("#calendarSplitDates").scrollLeft()&&(lastMonth<=1?(lastMonth=12,lastYear--):lastMonth--,$("#calendarSplitDates").css({cursor:"progress"}),$.ajax({method:"POST",url:"lastSplitMonth.php",data:{month:lastMonth,year:lastYear}}).done(function(e){var a=e.split("*");$("#calendarDateRow").prepend(a[0]);for(var t=1;t<=a.length;t++)$("#kennel"+t).prepend(a[t]);loadBookings(lastMonth,lastYear);var o=daysInMonth(lastMonth,lastYear);adjustPosition(o),$("#calendarSplitDates").css({cursor:"default"})}))})}),$(document).width()>1024&&$(window).scroll(function(){var e=0,a=10;a=$(document).scrollTop()-e-200+a,e=$(document).scrollTop(),e>216?$("#bookingSummary").animate({marginTop:a+"px"},{duration:400,queue:!1}):$("#bookingSummary").animate({marginTop:"20px"},{duration:400,queue:!1})}),$(".accordianArrow").click(function(){event.preventDefault()}),$("#dayCareDateSelect").datepicker({format:"yyyy/m/d",autoclose:!0}),$("#nightCheckIn").datepicker({format:"yyyy/m/d",autoclose:!0}),$("#nightCheckOut").datepicker({format:"yyyy/m/d",autoclose:!0}),$("#meetGreetDateSelect").datepicker({format:"yyyy/m/d",autoclose:!0}),$("#addDayDate").click(function(){event.preventDefault()}),$("#addMeetDate").click(function(){event.preventDefault()}),$("#splitBookingButton").click(function(){event.preventDefault()}),$(".progressbar").progressbar({value:100}),$(".ui-progressbar-value").addClass("available"),$(".progressbar").click(function(){event.preventDefault(),$(this).hasClass("ui-progressbar-indeterminate")?($(this).progressbar("option","value",100),$(this).find(".ui-progressbar-value").removeClass("myBooking"),$(this).find(".ui-progressbar-value").addClass("available")):$(this).find(".ui-progressbar-value").hasClass("doubleBooking")?$(this).hasClass("myBooking")?$(this).removeClass("myBooking"):$(this).addClass("myBooking"):($(this).progressbar("option","value",!1),$(this).children(".ui-progressbar-value").removeClass("available"),$(this).children(".ui-progressbar-value").addClass("myBooking"))}),$(".button2").click(function(){event.preventDefault()});$("#bookingClientReset").click(function(){event.preventDefault()}),$("#clientLiveSearch").on("input",function(){clearTimeout($.data(this,"timer"));var e=setTimeout(liveSearch,100);$(this).data("timer",e)}),$("#kennelsEdit").click(function(){event.preventDefault()}),$("#saveKennels").click(function(){$("#kennelSettings").submit()}),$("#addCharge").click(function(){event.preventDefault(),loadOtherCharge()}),$(".savebooking").click(function(){event.preventDefault()}),$("#splitBookingSave").click(function(){event.preventDefault()}),$("#markAsPaid").click(function(){event.preventDefault()}),$("#bookingShowDetailButton").click(function(){event.preventDefault();var e=$("#bookingShowDetailButton").is(":visible")?"Show Booking Details":"Hide Booking Details";$("#bookingShowDetailButton").html(e),$("#bookingShowDetailContainer").slideToggle("800")}),$("#deleteEntireBooking").click(function(){$(".overlay").removeClass("overlayHide"),$(".loadingContainer").show(),
$.ajax({method:"POST",url:"deleteBooking.php",data:{typeOfBooking:typeOfBooking}}).done(function(e){"Success"==e?location.href="booking":alert("There was a problem deleting the booking.")})}),$(function(){$("#calendarDates").scroll(function(){$(".bookingPopUp").hide(),$("#calendarDates").scrollLeft()==$("#calendarDates table").width()-$("#calendarDates").width()&&(nextMonth>=12?(nextMonth=1,nextYear++):nextMonth++,$("#calendarDates").css({cursor:"progress"}),$.ajax({method:"POST",url:"nextMonth.php",data:{month:nextMonth,year:nextYear}}).done(function(e){var a=e.split("*");$("#calendarDateRow").append(a[0]);for(var t=1;t<=a.length;t++)$("#kennel"+t).append(a[t]);$(".bookingInfoButton").unbind("click"),loadBookings(nextMonth,nextYear),$("#calendarDates").css({cursor:"default"})}))})}),$(function(){$("#calendarDates").scroll(function(){$(".bookingPopUp").hide(),0==$("#calendarDates").scrollLeft()&&(lastMonth<=1?(lastMonth=12,lastYear--):lastMonth--,$("#calendarDates").css({cursor:"progress"}),$.ajax({method:"POST",url:"lastMonth.php",data:{month:lastMonth,year:lastYear}}).done(function(e){var a=e.split("*");$("#calendarDateRow").prepend(a[0]);for(var t=1;t<=a.length;t++)$("#kennel"+t).prepend(a[t]);$(".bookingInfoButton").unbind("click"),loadBookings(lastMonth,lastYear);var o=daysInMonth(lastMonth,lastYear);adjustPosition(o),$("#calendarDates").css({cursor:"default"})}))})}),$("#calendarSelectedDates").datepicker({format:"yyyy/m/d",autoclose:!0}),$(".calendarTD").hover(function(){$(this).find(".bookButton").toggle()})});
